<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PetStack - Your Account</title>
    <link rel="stylesheet" href="account.css">
</head>
<body>

<!-- Dashboard Navigation -->
<nav class="dashboard-nav">
    <div class="dashboard-logo">PetStack</div>
    <ul class="nav-menu">
        <li class="nav-item active" id="navHouseholds" onclick="navigateTo('households')">Households</li>
        <li class="nav-item" id="navPets" onclick="navigateTo('pets')">Pets</li>
        <li class="nav-item link-style" id="navAccount" onclick="navigateTo('account')">Account</li>
    </ul>
</nav>

<div class="content-wrapper">
    <div class="header">
        <h1 id="pageTitle">Your Households</h1>
        <p class="welcome-text" id="welcomeText">Loading...</p>
    </div>

    <!-- Household View -->
    <div id="householdView">
        <div class="households-header" id="householdsHeader" style="display: none;">
            <button class="add-household-btn" onclick="createHousehold()">Create Household</button>
            <button class="add-household-btn" onclick="joinHousehold()">Join Household</button>
        </div>
        <div id="householdsContainer" class="households-container">
            <div class="loading">Loading your households...</div>
        </div>
    </div>

    <!-- Pet View -->
    <div id="petView">
        <div class="back-button-container">
            <button class="back-button" onclick="showHouseholds()">← Back to Households</button>
        </div>
        <h2 class="household-title" id="currentHouseholdName"></h2>
        <div style="text-align: center;">
            <div class="invite-code-section">
                <div class="invite-code-label">Household Invite Code:</div>
                <div class="invite-code-display" id="householdInviteCode">------</div>
            </div>
        </div>
        <div class="household-actions-container" id="householdActionsContainer">
            <!-- Leave or Delete button will be inserted here based on user role -->
        </div>
        <div id="petsContainer" class="pets-container">
            <div class="loading">Loading pets...</div>
        </div>
    </div>

    <!-- Activity View -->
    <div id="activityView" style="display: none;">

    <button onclick="showPets()" class="back-btn" id="activityBackButton">← Back to Pets</button>

    <button onclick="openAddActivityModal()" class="add-pet-btn">
        Add Activity
    </button>

    <h2 id="activityPetName"></h2>

    <div class="activity-top-box">
        <h3>Owner Notes</h3>
        <div id="ownerNotes" class="notes-box"></div>

        <h3>Selected Activity</h3>
        <div id="selectedActivity" class="notes-box"></div>
    </div>

    <h3>All Activities</h3>

    <div id="activityList" class="activity-list"></div>

</div>
    <!-- All Pets View (for Pets menu item) -->
    <div id="allPetsView" style="display: none;">
        <div id="allPetsContainer" class="pets-container">
            <div class="loading">Loading all your pets...</div>
        </div>
    </div>

    <!-- Account View -->
    <div id="accountView" style="display: none;">
        <div style="max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; border: 2px solid #333;">
            <h2 style="margin-bottom: 20px;">Account Information</h2>
            <div style="margin-bottom: 15px;">
                <strong>Display Name:</strong> <span id="accountDisplayName"></span>
            </div>
            <div style="margin-bottom: 15px;">
                <strong>Email:</strong> <span id="accountEmail"></span>
            </div>
            <div style="margin-bottom: 15px;">
                <strong>User ID:</strong> <span id="accountUserId"></span>
            </div>
            <br>
            <button onclick="logout()" style="background-color: #d32f2f; color: white; border: none; padding: 10px 20px; font-size: 16px; cursor: pointer; border-radius: 5px;">Logout</button>
        </div>
    </div>
</div>

<!-- Create Household Popup Dialog -->
<div id="createHouseholdModal" class="modal">
    <div class="modal-content">
        <h2 class="modal-header">Create New Household</h2>
        <div class="modal-body">
            <div id="createMessage" class="modal-message"></div>
            <input type="text" id="householdNameInput" class="modal-input" placeholder="Household Name">
        </div>
        <div class="modal-buttons">
            <button class="modal-btn modal-btn-secondary" onclick="closeCreateModal()">Cancel</button>
            <button class="modal-btn modal-btn-primary" onclick="submitCreateHousehold()">Create</button>
        </div>
    </div>
</div>

<!-- Join Household Popup Dialog -->
<div id="joinHouseholdModal" class="modal">
    <div class="modal-content">
        <h2 class="modal-header">Join Household</h2>
        <div class="modal-body">
            <div id="joinMessage" class="modal-message"></div>
            <input type="text" id="inviteCodeInput" class="modal-input" placeholder="Enter Invite Code" maxlength="8">
        </div>
        <div class="modal-buttons">
            <button class="modal-btn modal-btn-secondary" onclick="closeJoinModal()">Cancel</button>
            <button class="modal-btn modal-btn-primary" onclick="submitJoinHousehold()">Join</button>
        </div>
    </div>
</div>

<!-- Leave Household Popup Dialog -->
<div id="leaveHouseholdModal" class="modal">
    <div class="modal-content">
        <h2 class="modal-header">Leave Household</h2>
        <div class="modal-body">
            <div id="leaveMessage" class="modal-message"></div>
            <p>Are you sure you want to leave this household?</p>
        </div>
        <div class="modal-buttons">
            <button class="modal-btn modal-btn-secondary" onclick="closeLeaveModal()">Cancel</button>
            <button class="modal-btn modal-btn-primary" onclick="submitLeaveHousehold()">Leave</button>
        </div>
    </div>
</div>

<!-- Delete Household Popup Dialog -->
<div id="deleteHouseholdModal" class="modal">
    <div class="modal-content">
        <h2 class="modal-header">Delete Household</h2>
        <div class="modal-body">
            <div id="deleteMessage" class="modal-message"></div>
            <div class="modal-warning">
                <strong>Warning:</strong> This will permanently delete:
                <ul style="margin: 10px 0; padding-left: 20px;">
                    <li>All pets in this household</li>
                    <li>All activities for these pets</li>
                    <li>All member associations</li>
                </ul>
                This action cannot be undone!
            </div>
            <p>Type the household name to confirm deletion:</p>
            <input type="text" id="deleteConfirmInput" class="modal-input" placeholder="Household Name">
        </div>
        <div class="modal-buttons">
            <button class="modal-btn modal-btn-secondary" onclick="closeDeleteModal()">Cancel</button>
            <button class="modal-btn modal-btn-primary" style="background-color: #d32f2f;" onclick="submitDeleteHousehold()">Delete</button>
        </div>
    </div>
</div>

<!-- Add Pet Popup Dialog -->
<div id="addPetModal" class="modal">
    <div class="modal-content">
        <h2 class="modal-header">Add New Pet</h2>
        <div class="modal-body">
            <div id="addPetMessage" class="modal-message"></div>
            <input type="text" id="petNameInput" class="modal-input" placeholder="Pet Name *" required>
            <input type="text" id="petSpeciesInput" class="modal-input" placeholder="Species (e.g., Dog, Cat) *" required>
            <select id="petGenderInput" class="modal-input">
                <option value="Unknown">Gender: Unknown</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
            </select>
            <input type="date" id="petBirthdateInput" class="modal-input" placeholder="Birthdate (optional)">
            <textarea id="petNotesInput" class="modal-input" placeholder="Owner Notes (optional)" rows="3" style="resize: vertical;"></textarea>
        </div>
        <div class="modal-buttons">
            <button class="modal-btn modal-btn-secondary" onclick="closeAddPetModal()">Cancel</button>
            <button class="modal-btn modal-btn-primary" onclick="submitAddPet()">Add Pet</button>
        </div>
    </div>
</div>

<!-- Add Activity Popup Dialog -->
<div id="addActivityModal" class="modal">
    <div class="modal-content">
        <h2 class="modal-header">Add New Activity</h2>
        <div class="modal-body">
            <div id="addActivityMessage" class="modal-message"></div>
            <input type="text" id="activityType" class="modal-input" placeholder="Activity Type (e.g., Walk, Feeding, Vet Visit) *" required>
            <textarea id="activityNotes" class="modal-input" placeholder="Notes (optional)" rows="3" style="resize: vertical;"></textarea>
        </div>
        <div class="modal-buttons">
            <button class="modal-btn modal-btn-secondary" onclick="closeAddActivityModal()">Cancel</button>
            <button class="modal-btn modal-btn-primary" onclick="submitAddActivity()">Add Activity</button>
        </div>
    </div>
</div>

<!-- Load all JavaScript modules in correct order -->
<script src="account/household-manager.js"></script>
<script src="account/pet-manager.js"></script>
<script src="account/activity-manager.js"></script>
<script src="account/navigation.js"></script>
<script src="account/app-init.js"></script>

</body>
</html>